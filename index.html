<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nintendo Burg</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        html {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .page {
            display: none;
            min-height: 100vh;
        }
        .page.active {
            display: block;
        }
        .product-card {
            transition: transform 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .cart-item {
            transition: all 0.3s ease;
        }
        .cart-item-remove {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .cart-item:hover .cart-item-remove {
            opacity: 1;
        }
        
        /* Improved image container */
        .image-container {
            position: relative;
            width: 100%;
            padding-top: 75%; /* 4:3 aspect ratio */
            overflow: hidden;
        }
        .image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .product-card:hover .image-container img {
            transform: scale(1.05);
        }
        
        /* Category cards */
        .category-card .image-container {
            padding-top: 75%; /* Same aspect ratio as products */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans dark:bg-gray-900 dark:text-white">

    <!-- Bot√£o para Alternar Modo Escuro/Claro -->
    <button id="darkModeToggle" class="fixed top-4 right-4 z-50 p-3 bg-orange-500 text-white rounded-full shadow-lg hover:bg-orange-600 transition-colors">
        <i class="fas fa-adjust"></i>
    </button>

    <!-- √çcone do Carrinho -->
    <button id="cartButton" class="fixed bottom-6 right-6 z-50 p-4 bg-orange-500 text-white rounded-full shadow-lg hover:bg-orange-600 transition-colors">
        <i class="fas fa-shopping-cart"></i>
        <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hidden">0</span>
    </button>

    <!-- Menu de Navega√ß√£o -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-lg z-40 md:top-0 md:bottom-auto">
        <div class="container mx-auto flex justify-around md:justify-center md:space-x-10">
            <button onclick="showPage('home')" class="page-link active py-3 px-4 text-orange-500 border-t-2 border-orange-500 flex flex-col items-center">
                <i class="fas fa-home text-xl mb-1"></i>
                <span class="text-xs">In√≠cio</span>
            </button>
            <button onclick="showPage('hamburgueres')" class="page-link py-3 px-4 text-gray-500 dark:text-gray-400 flex flex-col items-center hover:text-orange-500 transition-colors">
                <i class="fas fa-hamburger text-xl mb-1"></i>
                <span class="text-xs">Hamb√∫rgueres</span>
            </button>
            <button onclick="showPage('bebidas')" class="page-link py-3 px-4 text-gray-500 dark:text-gray-400 flex flex-col items-center hover:text-orange-500 transition-colors">
                <i class="fas fa-glass-whiskey text-xl mb-1"></i>
                <span class="text-xs">Bebidas</span>
            </button>
            <button onclick="showPage('sobremesas')" class="page-link py-3 px-4 text-gray-500 dark:text-gray-400 flex flex-col items-center hover:text-orange-500 transition-colors">
                <i class="fas fa-ice-cream text-xl mb-1"></i>
                <span class="text-xs">Sobremesas</span>
            </button>
            <button onclick="showPage('pizzas')" class="page-link py-3 px-4 text-gray-500 dark:text-gray-400 flex flex-col items-center hover:text-orange-500 transition-colors">
                <i class="fas fa-pizza-slice text-xl mb-1"></i>
                <span class="text-xs">Pizzas</span>
            </button>
        </div>
    </nav>

    <!-- P√°ginas do Sistema -->

    <!-- P√°gina Inicial -->
    <div id="home" class="page active pb-16 md:pb-0 md:pt-16">
         <header class="bg-orange-500 text-white py-8 text-center">
            <div class="container mx-auto px-4">
                <img src="images/lo.png" alt="Logo" class="w-24 h-24 mx-auto rounded-full border-4 border-white mb-4">
                <h1 class="text-3xl font-bold">Nintendo Burg</h1>
                <p class="mt-2">Os melhores sabores da cidade</p>
            </div>
        </header>

        <main class="container mx-auto px-4 py-8">
            <h2 class="text-2xl font-bold mb-6 text-center">Nossas Categorias</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Card Hamb√∫rgueres -->
                <div onclick="showPage('hamburgueres')" class="category-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md cursor-pointer product-card">
                    <div class="image-container">
                        <img src="images/Bacon Burguer.jpeg" alt="Hamb√∫rgueres">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-orange-500">Hamb√∫rgueres</h3>
                        <p class="text-gray-600 dark:text-gray-300 mt-2">Deliciosas op√ß√µes de carne e vegetais</p>
                    </div>
                </div>

                <!-- Card Bebidas -->
                <div onclick="showPage('bebidas')" class="category-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md cursor-pointer product-card">
                    <div class="image-container">
                        <img src="images/bebidas.jpeg" alt="Bebidas">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-orange-500">Bebidas</h3>
                        <p class="text-gray-600 dark:text-gray-300 mt-2">Refrigerantes, sucos e cervejas</p>
                    </div>
                </div>

                <!-- Card Sobremesas -->
                <div onclick="showPage('sobremesas')" class="category-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md cursor-pointer product-card">
                    <div class="image-container">
                        <img src="images/Brownie.jpeg" alt="Sobremesas">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-orange-500">Sobremesas</h3>
                        <p class="text-gray-600 dark:text-gray-300 mt-2">Doces para finalizar sua refei√ß√£o</p>
                    </div>
                </div>

                <!-- Card Pizzas -->
                <div onclick="showPage('pizzas')" class="category-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md cursor-pointer product-card">
                    <div class="image-container">
                        <img src="images/pizza.jpeg" alt="Pizzas">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-orange-500">Pizzas</h3>
                        <p class="text-gray-600 dark:text-gray-300 mt-2">As melhores massas e recheios</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- P√°gina de Hamb√∫rgueres -->
    <div id="hamburgueres" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-hamburger text-orange-500 mr-2"></i>
                Hamb√∫rgueres
            </h1>
            
            <input type="text" id="searchBurgers" placeholder="Pesquisar hamb√∫rgueres..." 
                   class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
            
            <div id="burgersList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Produtos ser√£o carregados aqui via JavaScript -->
            </div>
        </div>
    </div>

    <!-- P√°gina de Bebidas -->
    <div id="bebidas" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-glass-whiskey text-orange-500 mr-2"></i>
                Bebidas
            </h1>
            
            <input type="text" id="searchDrinks" placeholder="Pesquisar bebidas..." 
                   class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
            
            <div id="drinksList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Produtos ser√£o carregados aqui via JavaScript -->
            </div>
        </div>
    </div>

    <!-- P√°gina de Sobremesas -->
    <div id="sobremesas" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-ice-cream text-orange-500 mr-2"></i>
                Sobremesas
            </h1>
            
            <input type="text" id="searchDesserts" placeholder="Pesquisar sobremesas..." 
                   class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
            
            <div id="dessertsList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Produtos ser√£o carregados aqui via JavaScript -->
            </div>
        </div>
    </div>

    <!-- P√°gina de Pizzas -->
    <div id="pizzas" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-pizza-slice text-orange-500 mr-2"></i>
                Pizzas
            </h1>
            
            <input type="text" id="searchPizzas" placeholder="Pesquisar pizzas..." 
                   class="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
            
            <div id="pizzasList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Produtos ser√£o carregados aqui via JavaScript -->
            </div>
        </div>
    </div>

    <!-- P√°gina do Carrinho -->
    <div id="carrinho" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-shopping-cart text-orange-500 mr-2"></i>
                Seu Carrinho
            </h1>
            
            <div id="cartItems" class="mb-6 space-y-4">
                <!-- Itens do carrinho ser√£o carregados aqui -->
                <p class="text-center text-gray-500 py-8">Seu carrinho est√° vazio</p>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6">
                <div class="flex justify-between mb-2">
                    <span>Subtotal:</span>
                    <span id="cartSubtotal">R$ 0,00</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span>Taxa de Entrega:</span>
                    <span id="deliveryFee">R$ 5,00</span>
                </div>
                <div class="flex justify-between font-bold text-lg border-t pt-3">
                    <span>Total:</span>
                    <span id="cartTotal">R$ 5,00</span>
                </div>
            </div>
            
            <button onclick="showPage('checkout')" id="checkoutButton" class="w-full py-3 bg-orange-500 text-white rounded-lg font-bold hover:bg-orange-600 transition-colors disabled:opacity-50" disabled>
                Finalizar Compra
            </button>
        </div>
    </div>

    <!-- P√°gina de Checkout -->
    <div id="checkout" class="page pb-16 md:pb-0 md:pt-16">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-credit-card text-orange-500 mr-2"></i>
                Finalizar Pedido
            </h1>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6">
                <h2 class="text-lg font-bold mb-3">Resumo do Pedido</h2>
                <div id="checkoutItems" class="mb-4">
                    <!-- Itens ser√£o carregados aqui -->
                </div>
                <div class="border-t pt-3">
                    <div class="flex justify-between font-bold">
                        <span>Total:</span>
                        <span id="checkoutTotal">R$ 0,00</span>
                    </div>
                </div>
            </div>
            
            <form id="checkoutForm" class="space-y-4">
                <div>
                    <label class="block text-gray-700 dark:text-gray-300 mb-1">Nome Completo</label>
                    <input type="text" id="nomeCliente" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-1">Rua/Avenida</label>
                        <input type="text" id="ruaCliente" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
                    </div>
                    <div>
                        <label class="block text-gray-700 dark:text-gray-300 mb-1">N√∫mero</label>
                        <input type="text" id="numeroCasa" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
                    </div>
                </div>
                
                <div>
                    <label class="block text-gray-700 dark:text-gray-300 mb-1">Bairro</label>
                    <input type="text" id="bairroCliente" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
                </div>
                
                <div>
                    <label class="block text-gray-700 dark:text-gray-300 mb-1">Complemento (Opcional)</label>
                    <input type="text" id="complementoCliente" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700" placeholder="Apartamento, bloco, refer√™ncia...">
                </div>
                
                <div>
                    <label class="block text-gray-700 dark:text-gray-300 mb-1">Telefone</label>
                    <input type="tel" id="telefoneCliente" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700" placeholder="(00) 00000-0000">
                </div>
                
                <div>
                    <label class="block text-gray-700 dark:text-gray-300 mb-2">Forma de Pagamento</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:border-orange-500 dark:border-gray-700">
                            <input type="radio" name="payment" value="dinheiro" checked class="mr-2 text-orange-500"> 
                            <i class="fas fa-money-bill-wave text-orange-500 mr-2"></i>
                            Dinheiro
                        </label>
                        <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:border-orange-500 dark:border-gray-700">
                            <input type="radio" name="payment" value="cartao" class="mr-2 text-orange-500"> 
                            <i class="fas fa-credit-card text-orange-500 mr-2"></i>
                            Cart√£o
                        </label>
                        <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:border-orange-500 dark:border-gray-700">
                            <input type="radio" name="payment" value="pix" class="mr-2 text-orange-500"> 
                            <i class="fas fa-qrcode text-orange-500 mr-2"></i>
                            Pix
                        </label>
                    </div>
                </div>
                
                <div id="trocoField" class="hidden">
                    <label class="block text-gray-700 dark:text-gray-300 mb-1">Troco para quanto?</label>
                    <input type="text" id="trocoPara" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 dark:bg-gray-800 dark:border-gray-700">
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="w-full py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 transition-colors">
                        Confirmar Pedido
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirmationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6 mx-4">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-green-500 dark:text-green-300 text-2xl"></i>
                </div>
                <h2 class="text-xl font-bold mb-2">Pedido Confirmado!</h2>
                <p class="text-gray-600 dark:text-gray-300 mb-6">Seu pedido foi recebido e est√° sendo preparado.</p>
                <button onclick="closeConfirmationModal()" class="w-full py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
                    Voltar ao In√≠cio
                </button>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o do Tailwind
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        orange: {
                            500: '#f97316',
                            600: '#ea580c'
                        }
                    }
                }
            }
        };

        // Dados dos produtos
        const products = {
            hamburgueres: [
                { id: 1, name: "Hamb√∫rguer Cl√°ssico", price: 20.00, description: "P√£o, carne, queijo e salada", image: "images/Hamb√∫rguer Cl√°ssico.jpeg" },
                { id: 2, name: "Cheeseburguer", price: 22.00, description: "Com queijo derretido", image: "images/cheeseburguer.jpeg" },
                { id: 3, name: "Bacon Burguer", price: 25.00, description: "Com bacon crocante", image: "images/Bacon Burguer.jpeg" },
                { id: 4, name: "Vegetariano", price: 18.00, description: "Op√ß√£o sem carne", image: "images/Vegetariano.jpeg" },
                { id: 5, name: "X-Tudo", price: 28.00, description: "Com tudo que voc√™ imagina", image: "images/X-Tudo.jpeg" }
            ],
            bebidas: [
                { id: 6, name: "Refrigerante", price: 6.00, description: "Lata 350ml", image: "images/Refrigerante.jpeg" },
                { id: 7, name: "Suco Natural", price: 8.00, description: "Cop√£o 500ml", image: "images/Suco Natural.jpeg" },
                { id: 8, name: "Cerveja", price: 10.00, description: "Long neck", image: "images/Cerveja.jpeg" },
                { id: 9, name: "√Ågua Mineral", price: 4.00, description: "Garrafa 500ml", image: "images/√Ågua Mineral.jpeg" }
            ],
            sobremesas: [
                { id: 10, name: "Sorvete", price: 12.00, description: "Casquinha", image: "images/Sorvete.jpeg" },
                { id: 11, name: "Brownie", price: 10.00, description: "Com sorvete", image: "images/Brownie.jpeg" },
                { id: 12, name: "Milk Shake", price: 15.00, description: "500ml", image: "sobre.jpeg" }
            ],
            pizzas: [
                { id: 13, name: "Pizza Margherita", price: 35.00, description: "Molho, mussarela e manjeric√£o", image: "images/Pizza-Margherita.jpeg" },
                { id: 14, name: "Pizza Calabresa", price: 40.00, description: "Calabresa e cebola", image: "images/calabresa.jpeg" },
                { id: 15, name: "Pizza 4 Queijos", price: 45.00, description: "Mussarela, provolone, parmes√£o e gorgonzola", image: "images/Pizza-4-Queijos.jpeg" }
            ]
        };

        // Vari√°veis globais
        let cart = [];
        const deliveryFee = 5.00;
        const whatsappNumber = "5584991612793"; // N√∫mero da hamburgueria

        // Fun√ß√µes de navega√ß√£o
        function showPage(pageId) {
            // Esconder todas as p√°ginas
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Mostrar a p√°gina solicitada
            document.getElementById(pageId).classList.add('active');
            
            // Atualizar menu de navega√ß√£o
            document.querySelectorAll('.page-link').forEach(link => {
                link.classList.remove('active', 'text-orange-500', 'border-orange-500');
                link.classList.add('text-gray-500', 'dark:text-gray-400');
            });
            
            // Se n√£o for a p√°gina de checkout, destacar o link correspondente
            if (pageId !== 'checkout' && pageId !== 'carrinho') {
                const activeLink = document.querySelector(`button[onclick="showPage('${pageId}')"]`);
                if (activeLink) {
                    activeLink.classList.add('active', 'text-orange-500', 'border-orange-500');
                    activeLink.classList.remove('text-gray-500', 'dark:text-gray-400');
                }
            }
            
            // Carregar conte√∫do espec√≠fico da p√°gina se necess√°rio
            if (pageId === 'hamburgueres') loadProducts('hamburgueres', 'burgersList');
            if (pageId === 'bebidas') loadProducts('bebidas', 'drinksList');
            if (pageId === 'sobremesas') loadProducts('sobremesas', 'dessertsList');
            if (pageId === 'pizzas') loadProducts('pizzas', 'pizzasList');
            if (pageId === 'carrinho') updateCartDisplay();
            if (pageId === 'checkout') updateCheckoutDisplay();
        }

        // Carregar produtos em uma p√°gina
        function loadProducts(category, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            products[category].forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md animate__animated animate__fadeIn';
                
                productCard.innerHTML = `
                    <div class="image-container">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg">${product.name}</h3>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mt-1">${product.description}</p>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-orange-500 font-bold">R$ ${product.price.toFixed(2)}</span>
                            <button onclick="addToCart(${product.id}, '${product.name}', ${product.price}, '${product.image}')" 
                                    class="px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        // Fun√ß√µes do carrinho
        function addToCart(id, name, price, image) {
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id,
                    name,
                    price,
                    image,
                    quantity: 1
                });
            }
            
            updateCartCount();
            
            // Feedback visual
            const button = event.target.closest('button');
            button.classList.add('animate__animated', 'animate__bounce');
            setTimeout(() => {
                button.classList.remove('animate__animated', 'animate__bounce');
            }, 1000);
            
            // Mostrar notifica√ß√£o
            Swal.fire({
                position: 'top-end',
                icon: 'success',
                title: `${name} adicionado ao carrinho`,
                showConfirmButton: false,
                timer: 1000
            });
        }

        function removeFromCart(id) {
            const index = cart.findIndex(item => item.id === id);
            
            if (index !== -1) {
                if (cart[index].quantity > 1) {
                    cart[index].quantity--;
                } else {
                    cart.splice(index, 1);
                }
                
                updateCartDisplay();
                updateCartCount();
            }
        }

        function updateCartCount() {
            const countElement = document.getElementById('cartCount');
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            
            if (totalItems > 0) {
                countElement.textContent = totalItems;
                countElement.classList.remove('hidden');
                document.getElementById('checkoutButton').disabled = false;
            } else {
                countElement.classList.add('hidden');
                document.getElementById('checkoutButton').disabled = true;
            }
        }

        function updateCartDisplay() {
            const container = document.getElementById('cartItems');
            const subtotalElement = document.getElementById('cartSubtotal');
            const totalElement = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-8">Seu carrinho est√° vazio</p>';
                subtotalElement.textContent = 'R$ 0,00';
                totalElement.textContent = 'R$ 5,00';
                return;
            }
            
            container.innerHTML = '';
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item bg-white dark:bg-gray-800 rounded-lg shadow-sm p-3 flex items-center';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded mr-3">
                    <div class="flex-grow">
                        <h4 class="font-medium">${item.name}</h4>
                        <p class="text-sm text-gray-500">R$ ${item.price.toFixed(2)}</p>
                    </div>
                    <div class="flex items-center">
                        <button onclick="removeFromCart(${item.id})" class="px-2 py-1 bg-gray-200 text-gray-700 rounded-l hover:bg-gray-300 dark:bg-gray-700 dark:text-white">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-600">${item.quantity}</span>
                        <button onclick="addToCart(${item.id}, '${item.name}', ${item.price}, '${item.image}')" class="px-2 py-1 bg-gray-200 text-gray-700 rounded-r hover:bg-gray-300 dark:bg-gray-700 dark:text-white">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                    </div>
                    <button onclick="removeAllFromCart(${item.id})" class="cart-item-remove ml-3 text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                container.appendChild(cartItem);
            });
            
            const total = subtotal + deliveryFee;
            subtotalElement.textContent = `R$ ${subtotal.toFixed(2)}`;
            totalElement.textContent = `R$ ${total.toFixed(2)}`;
        }

        function removeAllFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartDisplay();
            updateCartCount();
        }

        function updateCheckoutDisplay() {
            const container = document.getElementById('checkoutItems');
            const totalElement = document.getElementById('checkoutTotal');
            
            let subtotal = 0;
            container.innerHTML = '';
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'flex justify-between py-2 border-b border-gray-200 dark:border-gray-700';
                itemElement.innerHTML = `
                    <span>${item.quantity}x ${item.name}</span>
                    <span>R$ ${itemTotal.toFixed(2)}</span>
                `;
                container.appendChild(itemElement);
            });
            
            // Adicionar taxa de entrega
            const deliveryElement = document.createElement('div');
            deliveryElement.className = 'flex justify-between py-2 border-b border-gray-200 dark:border-gray-700';
            deliveryElement.innerHTML = `
                <span>Taxa de Entrega</span>
                <span>R$ ${deliveryFee.toFixed(2)}</span>
            `;
            container.appendChild(deliveryElement);
            
            const total = subtotal + deliveryFee;
            totalElement.textContent = `R$ ${total.toFixed(2)}`;
        }

        // Fun√ß√µes do checkout
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Obter dados do formul√°rio
            const nome = document.getElementById('nomeCliente').value;
            const rua = document.getElementById('ruaCliente').value;
            const numero = document.getElementById('numeroCasa').value;
            const bairro = document.getElementById('bairroCliente').value;
            const complemento = document.getElementById('complementoCliente').value;
            const telefone = document.getElementById('telefoneCliente').value;
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
            const trocoPara = document.getElementById('trocoPara')?.value || '';
            
            // Montar endere√ßo completo
            let enderecoCompleto = `${rua}, ${numero}, ${bairro}`;
            if (complemento) {
                enderecoCompleto += ` (${complemento})`;
            }
            
            // Validar campos
            if (!nome || !rua || !numero || !bairro || !telefone) {
                Swal.fire({
                    icon: 'error',
                    title: 'Campos incompletos',
                    text: 'Por favor, preencha todos os campos obrigat√≥rios'
                });
                return;
            }
            
            // Validar telefone
            const phoneRegex = /^(\+55)?[\s-]?\(?\d{2}\)?[\s-]?\d{4,5}[\s-]?\d{4}$/;
            if (!phoneRegex.test(telefone)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Telefone inv√°lido',
                    text: 'Por favor, insira um n√∫mero de telefone v√°lido com DDD'
                });
                return;
            }
            
            // Montar mensagem para WhatsApp
            let message = `*üçî NOVO PEDIDO - NINTENDO BURG üçî*\n\n`;
            message += `*üë§ Cliente:* ${nome}\n`;
            message += `*üìû Telefone:* ${telefone}\n`;
            message += `*üìç Endere√ßo:* ${enderecoCompleto}\n`;
            message += `*üó∫Ô∏è Mapa:* https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(enderecoCompleto)}\n\n`;
            message += `*üí≥ Forma de Pagamento:* ${paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1)}\n`;
            
            if (paymentMethod === 'dinheiro' && trocoPara) {
                message += `*üíµ Troco para:* R$ ${trocoPara}\n`;
            }
            
            message += `\n*üìù ITENS DO PEDIDO:*\n`;
            
            let subtotal = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                message += `- ${item.quantity}x ${item.name} - R$ ${itemTotal.toFixed(2)}\n`;
            });
            
            const total = subtotal + deliveryFee;
            message += `\n*üì¶ Taxa de Entrega:* R$ ${deliveryFee.toFixed(2)}\n`;
            message += `*üí∞ TOTAL:* R$ ${total.toFixed(2)}\n\n`;
            message += `‚è±Ô∏è *Tempo estimado:* 30-40 minutos\n`;
            message += `üö¥ *Entregador:* A caminho ap√≥s confirma√ß√£o`;
            
            // Codificar a mensagem para URL
            const encodedMessage = encodeURIComponent(message);
            
            // Abrir WhatsApp com a mensagem
            window.open(`https://wa.me/${whatsappNumber}?text=${encodedMessage}`, '_blank');
            
            // Mostrar modal de confirma√ß√£o
            document.getElementById('confirmationModal').classList.remove('hidden');
        });

        // Fechar modal de confirma√ß√£o
        function closeConfirmationModal() {
            document.getElementById('confirmationModal').classList.add('hidden');
            
            // Limpar carrinho e voltar para a p√°gina inicial
            cart = [];
            updateCartCount();
            updateCartDisplay();
            showPage('home');
            
            // Limpar formul√°rio
            document.getElementById('checkoutForm').reset();
        }

        // Alternar campo de troco
        document.querySelectorAll('input[name="payment"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const trocoField = document.getElementById('trocoField');
                if (this.value === 'dinheiro') {
                    trocoField.classList.remove('hidden');
                } else {
                    trocoField.classList.add('hidden');
                }
            });
        });

        // Fun√ß√µes de busca
        document.getElementById('searchBurgers').addEventListener('input', function() {
            searchProducts('hamburgueres', 'burgersList', this.value.toLowerCase());
        });

        document.getElementById('searchDrinks').addEventListener('input', function() {
            searchProducts('bebidas', 'drinksList', this.value.toLowerCase());
        });

        document.getElementById('searchDesserts').addEventListener('input', function() {
            searchProducts('sobremesas', 'dessertsList', this.value.toLowerCase());
        });

        document.getElementById('searchPizzas').addEventListener('input', function() {
            searchProducts('pizzas', 'pizzasList', this.value.toLowerCase());
        });

        function searchProducts(category, containerId, searchTerm) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const filteredProducts = products[category].filter(product => 
                product.name.toLowerCase().includes(searchTerm) || 
                product.description.toLowerCase().includes(searchTerm));
            
            if (filteredProducts.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-8">Nenhum produto encontrado</p>';
                return;
            }
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md animate__animated animate__fadeIn';
                productCard.innerHTML = `
                    <div class="image-container">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg">${product.name}</h3>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mt-1">${product.description}</p>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-orange-500 font-bold">R$ ${product.price.toFixed(2)}</span>
                            <button onclick="addToCart(${product.id}, '${product.name}', ${product.price}, '${product.image}')" 
                                    class="px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        // Alternar modo escuro/claro
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        });

        // Verificar prefer√™ncia de modo escuro
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }

        // Abrir carrinho ao clicar no √≠cone
        document.getElementById('cartButton').addEventListener('click', function() {
            showPage('carrinho');
        });

        // M√°scara para telefone
        document.getElementById('telefoneCliente').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 11) value = value.substring(0, 11);
            
            if (value.length > 0) {
                value = `(${value.substring(0, 2)}) ${value.substring(2)}`;
                if (value.length > 9) {
                    value = `${value.substring(0, 10)}-${value.substring(10)}`;
                }
            }
            
            e.target.value = value;
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar produtos da p√°gina inicial
            loadProducts('hamburgueres', 'burgersList');
            loadProducts('bebidas', 'drinksList');
            loadProducts('sobremesas', 'dessertsList');
            loadProducts('pizzas', 'pizzasList');
            
            // Verificar se h√° itens no carrinho ao carregar
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartCount();
            }
        });

        // Salvar carrinho ao sair da p√°gina
        window.addEventListener('beforeunload', function() {
            localStorage.setItem('cart', JSON.stringify(cart));
        });
    </script>
</body>
</html>